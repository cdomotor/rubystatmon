<!-- File: app/views/stations/show.html.erb -->
<!-- Full path: /app/views/stations/show.html.erb -->

<% content_for :title, "Station: #{@station.name}" %>

<div class="space-y-6">
  <div class="flex items-center justify-between">
    <h1 class="text-3xl font-bold"><%= @station.name.presence || "Station ##{@station.id}" %></h1>
    <div class="text-sm text-gray-500">
      Last seen by <%= current_user&.name || "user" %> at <%= Time.zone.now.strftime("%Y-%m-%d %H:%M") %>
    </div>
  </div>

  <!-- Battery Chart -->
  <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
    <h2 class="text-xl font-semibold mb-3">Battery Voltage</h2>
    <canvas id="batteryChart" height="140"></canvas>
  </div>

  <!-- Parameter Chart -->
  <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-xl font-semibold">Logger Parameters</h2>
      <div class="text-sm text-gray-500">
        Series: <%= @selected_params.join(", ") %>
      </div>
    </div>
    <canvas id="paramsChart" height="200"></canvas>
  </div>
</div>

<!-- Inline data payloads for JS (avoids extra endpoints for now) -->
<script type="application/json" id="battery-data-json">
  <%= @battery_data.to_json %>
</script>

<script type="application/json" id="params-data-json">
  <%= @param_data.to_json %>
</script>

<script type="application/json" id="battery-thresholds-json">
  <%= @battery_thresholds.to_json %>
</script>
